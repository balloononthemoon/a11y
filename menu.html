<style type="text/css">
    html,body{
        font-family: "Comic Sans MS";
    }
    a{
        text-decoration: none;
    }
    .nodisplay{
        display: none !important;
    }

    menu{
        padding-left: 0;
    }
    menu.level0{
        display: flex;
        flex-flow: row;
        flex-wrap: wrap;
    }

    menu.level0 > li{
        display: flex;
        justify-content: center;
        position: relative;
    }
    menu.level1{
        display: block;
        position: absolute;
        top: 25px;
        left: 10px;
    }

    li{
        list-style-type: none;
        padding: 0 10px;
    }

    button.expander{
        margin:0 5px;
        transform: rotate(90deg);
    }

    button.expander.opened{
        transform: rotate(270deg);
    }

</style>

<nav aria-label="Main Navigation">
    <menu class="navmenu level0">
        <li><a href="/">Home</a></li>
        <li class="has-submenu">
            <a href="/about" class="submenu">About Us</a>
            <!-- <button class="expander" aria-expanded="false">&#10148;</button> -->
            <menu aria-hidden="true" aria-expanded="false" class="navmenu level1 nodisplay">
                <li><a href="/about/history">History</a></li>
                <li><a href="/about/leadership">Leadership</a></li>
                <li><a href="/about/mission">Mission & Values</a></li>
                <li><a href="/about/accreditation">Accredication</a></li>
            </menu>
        </li>
        <li class="has-submenu">
            <a href="/academics" class="submenu">Academics</a>
            <menu aria-hidden="true" aria-expanded="false" class="navmenu level1 nodisplay">
                <li><a href="/academics/undergraduate">Undergraduate Programs</a></li>
                <li><a href="/academics/graduate">Graduate Programs</a></li>
                <li><a href="/academics/online">Online Learning</a></li>
            </menu>
        </li>
        <li class="has-submenu">
            <a href="/admissions">Admissions</a>
            <menu aria-hidden="true" aria-expanded="false" class="navmenu level1 nodisplay">
                <li><a href="/admissions/application">Application</a></li>
                <li><a href="/admissions/tuition">Tuition and Fees</a></li>
                <li><a href="/admissions/Financial Aid"></a></li>
                <li><a href="/admissions/visit">Visit Us</a></li>
            </menu>
        </li>
        <li class="has-submenu">
            <a href="/research">Research</a>
            <menu aria-hidden="true" aria-expanded="false" class="navmenu level1 nodisplay">
                <li><a href="/research/labs">Labs and Facilities</a></li>
                <li><a href="/research/projects">Current Projects</a></li>
                <li><a href="/research/grants">Research Grants</a></li>
            </menu>
        </li>
        <li class="has-submenu">
            <a href="/alumni">Alumni</a>
            <menu aria-hidden="true" aria-expanded="false" class="navmenu level1 nodisplay">
                <li><a href="alumni/assoc">Alumni Association</a></li>
                <li><a href="alumni/events">Events</a></li>
                <li><a href="alumni/directory">Directory</a></li>
            </menu>
        </li>
        <li class="has-submenu">
            <a href="/contact">Contact Us</a>
            <menu aria-hidden="true" aria-expanded="false" class="navmenu level1 nodisplay">
                <li><a href="/contact/campusmap">Campus Map</a></li>
                <li><a href="/contact/faculty">Faculty Directory</a></li>
                <li><a href="/contact/contactform">Contact Form</a></li>
            </menu>
        </li>
    </menu>
</nav>

<script type="text/javascript">
    console.log("HELLO")
    const submenus = document.querySelectorAll('.has-submenu');
    submenus.forEach((item) => {
        const anchor = item.querySelector("& > a");
        const button = item.querySelector('button.expander');
        anchor.addEventListener('mouseover', toggleMenu);
        anchor.addEventListener('mouseout', toggleMenu);
        // button.addEventListener('click', toggleMenu);
    })

    function toggleMenu(e){
        const el = e.target.parentElement;
        const menu = el.querySelector('menu');
        const button = el.querySelector('button.expander');

        const hidden = menu.getAttribute('aria-hidden') == 'true';
        if(e.type === 'mouseover' && !hidden){
            return;
        }
        console.log("TOGGLE MENU", e.type, hidden);
        menu.setAttribute('aria-hidden', menu.getAttribute('aria-hidden') == 'true' ? false:true)
        menu.setAttribute('aria-expanded', menu.getAttribute('aria-expanded') == 'true' ? false:true)

        if(hidden){
            menu.classList.remove('nodisplay');
            // button.classList.add('opened');
        }else{
            menu.classList.add('nodisplay');
            // button.classList.remove('opened');
        }
    }

</script>

